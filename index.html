<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أثَـــر</title>
    <style>
        /* التصميم الأصلي حقك اللي تحبينه */
        body { margin: 0; background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
        .card { background: rgba(10, 30, 20, 0.9); padding: 2.5rem; border-radius: 30px; border: 2px solid #2ecc71; width: 85%; max-width: 380px; text-align: center; z-index: 10; box-shadow: 0 0 50px rgba(46, 204, 113, 0.3); }
        h1 { font-size: 2.8rem; text-shadow: 0 0 20px #2ecc71; margin: 0; }
        .tagline { color: #00f2ff; font-size: 0.8rem; letter-spacing: 5px; margin-bottom: 25px; }
        input { width: 100%; padding: 13px; margin: 10px 0; background: rgba(0, 50, 0, 0.2); border: 1px solid rgba(46, 204, 113, 0.3); color: #fff; border-radius: 12px; box-sizing: border-box; text-align: right; }
        input:read-only { background: rgba(46, 204, 113, 0.1); color: #2ecc71; border-style: dashed; }
        .btn-style { width: 100%; padding: 16px; margin-top: 15px; background: linear-gradient(135deg, #2ecc71, #00f2ff); border: none; border-radius: 12px; font-weight: bold; cursor: pointer; color: #000; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="card" id="mainCard">
    <h1>أثَـــر</h1>
    <div class="tagline">ATHAR LEGACY</div>
    <form id="activationForm">
        <input type="text" name="name" placeholder="صاحب الأثر *" required>
        <input type="tel" name="phone" placeholder="رقم الجوال *" required>
        <input type="email" name="email" placeholder="البريد الإلكتروني (اختياري)">
        <input type="text" name="account" placeholder="حساب التواصل (اختياري)">
        <input type="text" name="itemCode" id="itemCode" placeholder="كود التفعيل" required readonly>
        <button type="submit" class="btn-style" id="submitBtn">بث الحياة في أثرك</button>
    </form>
</div>

<script>
    // أول ما تفتح الصفحة، غصب يقرأ الرابط
    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        const codeInUrl = params.get('code');
        
        console.log("الكود المستخرج من الرابط هو: ", codeInUrl); // للتأكد في الكونسول
        
        if (codeInUrl) {
            document.getElementById('itemCode').value = codeInUrl;
        } else {
            document.getElementById('itemCode').value = "اكتب الكود هنا";
            document.getElementById('itemCode').readOnly = false;
        }
    };

    // إرسال البيانات لقوقل
    document.getElementById('activationForm').onsubmit = function(e) {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.innerText = "جاري الحفظ...";
        
        fetch('https://script.google.com/macros/s/AKfycbzUBgwXxtTWy_Ddel7FAyVo_luVbPLmmr9a6kMcaMRpCZ0Vy906T70vQXH65Ocwdm_q/exec', {
            method: 'POST',
            mode: 'no-cors',
            body: new URLSearchParams(new FormData(this))
        }).then(() => {
            alert('تم تفعيل أثرك بنجاح!');
            location.reload();
        });
    };
</script>
</body>
</html>
